<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download SnapTour Project</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body { font-family: system-ui, sans-serif; background: #0f172a; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .container { text-align: center; background: #1e293b; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); border: 1px solid #334155; }
        h1 { margin-bottom: 10px; color: #38bdf8; }
        p { color: #94a3b8; margin-bottom: 30px; }
        button { background: linear-gradient(to right, #6366f1, #ec4899); color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 12px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; font-weight: bold; }
        button:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(99, 102, 241, 0.5); }
        button:active { transform: scale(0.98); }
        .status { margin-top: 20px; font-size: 14px; min-height: 20px; }
        .error { color: #ef4444; }
        .success { color: #22c55e; }
    </style>
</head>
<body>

    <div class="container">
        <h1>SnapTour Downloader</h1>
        <p>Click below to generate the project ZIP file.</p>
        <button id="downloadBtn" onclick="downloadProject()">Download SnapTour ZIP</button>
        <div class="status" id="status">Ready</div>
    </div>

<script>
// Use decodeURIComponent to safely handle special chars and template literals
const files = {
  ".gitignore": `node_modules%0Adist%0Adist-ssr%0A*.local%0A.env%0A.DS_Store%0A`,
  "package.json": `%7B%0A%20%20%22name%22%3A%20%22snaptour%22%2C%0A%20%20%20%22private%22%3A%20true%2C%0A%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%22type%22%3A%20%22module%22%2C%0A%20%20%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%20%20%22dev%22%3A%20%22vite%22%2C%0A%20%20%20%20%20%20%22build%22%3A%20%22vite%20build%22%2C%0A%20%20%20%20%20%20%22preview%22%3A%20%22vite%20preview%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%20%20%22%40google%2Fgenai%22%3A%20%22%5E1.0.0%22%2C%0A%20%20%20%20%20%20%22lucide-react%22%3A%20%22%5E0.344.0%22%2C%0A%20%20%20%20%20%20%22react%22%3A%20%22%5E18.2.0%22%2C%0A%20%20%20%20%20%20%22react-dom%22%3A%20%22%5E18.2.0%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%20%20%22%40types%2Freact%22%3A%20%22%5E18.2.64%22%2C%0A%20%20%20%20%20%20%22%40types%2Freact-dom%22%3A%20%22%5E18.2.21%22%2C%0A%20%20%20%20%20%20%22%40vitejs%2Fplugin-react%22%3A%20%22%5E4.2.1%22%2C%0A%20%20%20%20%20%20%22typescript%22%3A%20%22%5E5.2.2%22%2C%0A%20%20%20%20%20%20%22vite%22%3A%20%22%5E5.1.6%22%0A%20%20%20%20%7D%0A%7D`,
  "tsconfig.json": `%7B%0A%20%20%20%20%22compilerOptions%22%3A%20%7B%0A%20%20%20%20%20%20%22target%22%3A%20%22ES2020%22%2C%0A%20%20%20%20%20%20%22useDefineForClassFields%22%3A%20true%2C%0A%20%20%20%20%20%20%22lib%22%3A%20%5B%22ES2020%22%2C%20%22DOM%22%2C%20%22DOM.Iterable%22%5D%2C%0A%20%20%20%20%20%20%22module%22%3A%20%22ESNext%22%2C%0A%20%20%20%20%20%20%22skipLibCheck%22%3A%20true%2C%0A%20%20%20%20%20%20%22moduleResolution%22%3A%20%22bundler%22%2C%0A%20%20%20%20%20%20%22allowImportingTsExtensions%22%3A%20true%2C%0A%20%20%20%20%20%20%22resolveJsonModule%22%3A%20true%2C%0A%20%20%20%20%20%20%22isolatedModules%22%3A%20true%2C%0A%20%20%20%20%20%20%22noEmit%22%3A%20true%2C%0A%20%20%20%20%20%20%22jsx%22%3A%20%22react-jsx%22%2C%0A%20%20%20%20%20%20%22strict%22%3A%20true%2C%0A%20%20%20%20%20%20%22noUnusedLocals%22%3A%20false%2C%0A%20%20%20%20%20%20%22noUnusedParameters%22%3A%20false%2C%0A%20%20%20%20%20%20%22noFallthroughCasesInSwitch%22%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22include%22%3A%20%5B%22.%2F**%2F*.ts%22%2C%20%22.%2F**%2F*.tsx%22%5D%0A%7D`,
  "vite.config.ts": `import%20%7B%20defineConfig%2C%20loadEnv%20%7D%20from%20'vite'%3B%0Aimport%20react%20from%20'%40vitejs%2Fplugin-react'%3B%0A%0Aexport%20default%20defineConfig((%7B%20mode%20%7D)%20%3D%3E%20%7B%0A%20%20%20%20const%20env%20%3D%20loadEnv(mode%2C%20'.'%2C%20'')%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20plugins%3A%20%5Breact()%5D%2C%0A%20%20%20%20%20%20define%3A%20%7B%0A%20%20%20%20%20%20%20%20'process.env.API_KEY'%3A%20JSON.stringify(env.API_KEY)%2C%0A%20%20%20%20%20%20%20%20'process.env.GOOGLE_CLIENT_ID'%3A%20JSON.stringify(env.GOOGLE_CLIENT_ID)%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20base%3A%20'.%2F'%2C%20%0A%20%20%20%20%20%20server%3A%20%7B%0A%20%20%20%20%20%20%20%20port%3A%203000%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%7D)%3B`,
  "index.html": `<!DOCTYPE%20html>%0A%3Chtml%20lang%3D%22en%22%3E%0A%20%20%20%20%3Chead%3E%0A%20%20%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%20%2F%3E%0A%20%20%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%20%2F%3E%0A%20%20%20%20%20%20%3Ctitle%3ESnapTour%3C%2Ftitle%3E%0A%20%20%20%20%20%20%3Cscript%20src%3D%22https%3A%2F%2Fcdn.tailwindcss.com%22%3E%3C%2Fscript%3E%0A%20%20%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20%40import%20url('https%3A%2F%2Ffonts.googleapis.com%2Fcss2%3Ffamily%3DInter%3Awght%40300%3B400%3B600%3B800%26display%3Dswap')%3B%0A%20%20%20%20%20%20%20%20body%20%7B%20font-family%3A%20'Inter'%2C%20sans-serif%3B%20background-color%3A%20%230f172a%3B%20color%3A%20%23f8fafc%3B%20%7D%0A%20%20%20%20%20%20%20%20%3A%3A-webkit-scrollbar%20%7B%20width%3A%208px%3B%20%7D%0A%20%20%20%20%20%20%20%20%3A%3A-webkit-scrollbar-track%20%7B%20background%3A%20%231e293b%3B%20%7D%0A%20%20%20%20%20%20%20%20%3A%3A-webkit-scrollbar-thumb%20%7B%20background%3A%20%23475569%3B%20border-radius%3A%204px%3B%20%7D%0A%20%20%20%20%20%20%20%20%3A%3A-webkit-scrollbar-thumb%3Ahover%20%7B%20background%3A%20%2364748b%3B%20%7D%0A%20%20%20%20%20%20%20%20%40keyframes%20scan%20%7B%200%25%20%7B%20top%3A%200%25%3B%20opacity%3A%200%3B%20%7D%2010%25%20%7B%20opacity%3A%201%3B%20%7D%2090%25%20%7B%20opacity%3A%201%3B%20%7D%20100%25%20%7B%20top%3A%20100%25%3B%20opacity%3A%200%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20.scan-line%20%7B%20position%3A%20absolute%3B%20left%3A%200%3B%20right%3A%200%3B%20height%3A%202px%3B%20background%3A%20%236366f1%3B%20box-shadow%3A%200%200%2020px%202px%20%236366f1%2C%200%200%2010px%201px%20%23818cf8%3B%20animation%3A%20scan%202s%20cubic-bezier(0.4%2C%200%2C%200.2%2C%201)%20infinite%3B%20z-index%3A%2020%3B%20%7D%0A%20%20%20%20%20%20%20%20.animate-shimmer%20%7B%20animation%3A%20shimmer%202s%20linear%20infinite%3B%20background%3A%20linear-gradient(to%20right%2C%20%231e293b%200%25%2C%20%23334155%2020%25%2C%20%231e293b%2040%25%2C%20%231e293b%20100%25)%3B%20background-size%3A%201000px%20100%25%3B%20%7D%0A%20%20%20%20%20%20%20%20%40keyframes%20shimmer%20%7B%200%25%20%7B%20background-position%3A%20-1000px%200%3B%20%7D%20100%25%20%7B%20background-position%3A%201000px%200%3B%20%7D%20%7D%0A%20%20%20%20%20%20%3C%2Fstyle%3E%0A%20%20%20%20%20%20%3Cscript%20src%3D%22https%3A%2F%2Faccounts.google.com%2Fgsi%2Fclient%22%20async%20defer%3E%3C%2Fscript%3E%0A%20%20%20%20%3C%2Fhead%3E%0A%20%20%20%20%3Cbody%3E%0A%20%20%20%20%20%20%3Cdiv%20id%3D%22root%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3Cscript%20type%3D%22module%22%20src%3D%22.%2Findex.tsx%22%3E%3C%2Fscript%3E%0A%20%20%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E`,
  "index.tsx": `import%20React%20from%20'react'%3B%0Aimport%20ReactDOM%20from%20'react-dom%2Fclient'%3B%0Aimport%20App%20from%20'.%2FApp'%3B%0A%0Aconst%20rootElement%20%3D%20document.getElementById('root')%3B%0Aif%20(!rootElement)%20%7B%0A%20%20%20throw%20new%20Error(%22Could%20not%20find%20root%20element%20to%20mount%20to%22)%3B%0A%7D%0A%0Aconst%20root%20%3D%20ReactDOM.createRoot(rootElement)%3B%0Aroot.render(%0A%20%20%20%3CReact.StrictMode%3E%0A%20%20%20%20%20%3CApp%20%2F%3E%0A%20%20%20%3C%2FReact.StrictMode%3E%0A)%3B`,
  "metadata.json": `%7B%0A%20%20%20%20%22name%22%3A%20%22SnapTour%22%2C%0A%20%20%20%20%22description%22%3A%20%22An%20AI-powered%20photo%20tourism%20app%20that%20recognizes%20landmarks%2C%20fetches%20history%20via%20Google%20Search%2C%20and%20provides%20narrated%20audio%20tours.%22%2C%0A%20%20%20%20%22requestFramePermissions%22%3A%20%5B%0A%20%20%20%20%20%20%22camera%22%2C%0A%20%20%20%20%20%20%22microphone%22%0A%20%20%20%20%5D%0A%7D`,
  "types.ts": `export%20interface%20LandmarkInfo%20%7B%0A%20%20%20name%3A%20string%3B%0A%20%20%20description%3A%20string%3B%0A%20%20%20facts%3A%20string%5B%5D%3B%0A%7D%0A%0Aexport%20interface%20GroundingChunk%20%7B%0A%20%20%20web%3F%3A%20%7B%0A%20%20%20%20%20uri%3A%20string%3B%0A%20%20%20%20%20title%3A%20string%3B%0A%20%20%20%7D%3B%0A%7D%0A%0Aexport%20interface%20AnalysisResult%20%7B%0A%20%20%20landmarkName%3A%20string%3B%0A%20%20%20detailedInfo%3A%20string%3B%0A%20%20%20groundingSources%3A%20GroundingChunk%5B%5D%3B%0A%20%20%20audioBuffer%3A%20AudioBuffer%20%7C%20null%3B%0A%7D%0A%0Aexport%20interface%20LandmarkIdentification%20%7B%0A%20%20%20name%3A%20string%3B%0A%20%20%20confidence%3A%20number%3B%0A%20%20%20alternatives%3A%20string%5B%5D%3B%0A%7D%0A%0Aexport%20interface%20User%20%7B%0A%20%20%20name%3A%20string%3B%0A%20%20%20email%3A%20string%3B%0A%20%20%20picture%3A%20string%3B%0A%20%20%20accessToken%3F%3A%20string%3B%0A%7D%0A%0Aexport%20interface%20HistoryItem%20%7B%0A%20%20%20id%3A%20string%3B%0A%20%20%20timestamp%3A%20number%3B%0A%20%20%20thumbnail%3A%20string%3B%20%2F%2F%20Base64%0A%20%20%20landmarkName%3A%20string%3B%0A%20%20%20summary%3A%20string%3B%0A%20%20%20detailedInfo%3F%3A%20string%3B%20%2F%2F%20Optional%20for%20backward%20compatibility%0A%20%20%20groundingSources%3F%3A%20GroundingChunk%5B%5D%3B%20%2F%2F%20Optional%20for%20backward%20compatibility%0A%7D%0A%0Aexport%20enum%20AppState%20%7B%0A%20%20%20IDLE%20%3D%20'IDLE'%2C%0A%20%20%20ANALYZING_IMAGE%20%3D%20'ANALYZING_IMAGE'%2C%0A%20%20%20SELECTING_LANDMARK%20%3D%20'SELECTING_LANDMARK'%2C%0A%20%20%20FETCHING_DETAILS%20%3D%20'FETCHING_DETAILS'%2C%0A%20%20%20GENERATING_AUDIO%20%3D%20'GENERATING_AUDIO'%2C%0A%20%20%20SHOWING_RESULT%20%3D%20'SHOWING_RESULT'%2C%0A%20%20%20VIEWING_HISTORY%20%3D%20'VIEWING_HISTORY'%2C%0A%20%20%20ERROR%20%3D%20'ERROR'%0A%7D%0A%0Aexport%20interface%20Translation%20%7B%0A%20%20%20startTitle%3A%20string%3B%0A%20%20%20startSubtitle%3A%20string%3B%0A%20%20%20uploadBtn%3A%20string%3B%0A%20%20%20cameraBtn%3A%20string%3B%0A%20%20%20supports%3A%20string%3B%0A%20%20%20analyzing%3A%20string%3B%0A%20%20%20fetching%3A%20string%3B%0A%20%20%20generating%3A%20string%3B%0A%20%20%20identifying_sub%3A%20string%3B%0A%20%20%20error%3A%20string%3B%0A%20%20%20tryAgain%3A%20string%3B%0A%20%20%20landmarkLabel%3A%20string%3B%0A%20%20%20scanAnother%3A%20string%3B%0A%20%20%20verifiedSources%3A%20string%3B%0A%20%20%20oops%3A%20string%3B%0A%20%20%20selectMatch%3A%20string%3B%0A%20%20%20uncertain%3A%20string%3B%0A%20%20%20confidence%3A%20string%3B%0A%20%20%20noneOfThese%3A%20string%3B%0A%20%20%20login%3A%20string%3B%0A%20%20%20logout%3A%20string%3B%0A%20%20%20history%3A%20string%3B%0A%20%20%20historyTitle%3A%20string%3B%0A%20%20%20noHistory%3A%20string%3B%0A%20%20%20home%3A%20string%3B%0A%20%20%20share%3A%20string%3B%0A%20%20%20shareSuccess%3A%20string%3B%0A%20%20%20shareError%3A%20string%3B%0A%20%20%20clearHistory%3A%20string%3B%0A%20%20%20confirmClear%3A%20string%3B%0A%7D`,
  "services/audioUtils.ts": `%2F%2F%20Decodes%20base64%20string%20to%20Uint8Array%0Aexport%20function%20decodeBase64(base64%3A%20string)%3A%20Uint8Array%20%7B%0A%20%20const%20binaryString%20%3D%20atob(base64)%3B%0A%20%20const%20len%20%3D%20binaryString.length%3B%0A%20%20const%20bytes%20%3D%20new%20Uint8Array(len)%3B%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%20%7B%0A%20%20%20%20bytes%5Bi%5D%20%3D%20binaryString.charCodeAt(i)%3B%0A%20%20%7D%0A%20%20return%20bytes%3B%0A%7D%0A%0A%2F%2F%20Decodes%20PCM%20data%20into%20an%20AudioBuffer%0Aexport%20async%20function%20decodeAudioData(%0A%20%20data%3A%20Uint8Array%2C%0A%20%20ctx%3A%20AudioContext%2C%0A%20%20sampleRate%3A%20number%20%3D%2024000%2C%0A%20%20numChannels%3A%20number%20%3D%201%0A)%3A%20Promise%3CAudioBuffer%3E%20%7B%0A%20%20const%20dataInt16%20%3D%20new%20Int16Array(data.buffer)%3B%0A%20%20const%20frameCount%20%3D%20dataInt16.length%20%2F%20numChannels%3B%0A%20%20const%20buffer%20%3D%20ctx.createBuffer(numChannels%2C%20frameCount%2C%20sampleRate)%3B%0A%0A%20%20for%20(let%20channel%20%3D%200%3B%20channel%20%3C%20numChannels%3B%20channel%2B%2B)%20%7B%0A%20%20%20%20const%20channelData%20%3D%20buffer.getChannelData(channel)%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20frameCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20channelData%5Bi%5D%20%3D%20dataInt16%5Bi%20*%20numChannels%20%2B%20channel%5D%20%2F%2032768.0%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20return%20buffer%3B%0A%7D`,
  "services/geminiService.ts": `import%20%7B%20GoogleGenAI%2C%20Modality%2C%20Type%20%7D%20from%20%22%40google%2Fgenai%22%3B%0Aimport%20%7B%20decodeBase64%2C%20decodeAudioData%20%7D%20from%20%22.%2FaudioUtils%22%3B%0Aimport%20%7B%20GroundingChunk%2C%20LandmarkIdentification%20%7D%20from%20%22..%2Ftypes%22%3B%0A%0Alet%20aiInstance%3A%20GoogleGenAI%20%7C%20null%20%3D%20null%3B%0A%0Aconst%20getAI%20%3D%20()%20%3D%3E%20%7B%0A%20%20if%20(!aiInstance)%20%7B%0A%20%20%20%20const%20apiKey%20%3D%20process.env.API_KEY%3B%0A%20%20%20%20if%20(!apiKey)%20%7B%0A%20%20%20%20%20%20console.error(%22API%20Key%20is%20missing.%20Please%20check%20your%20.env%20file%20or%20GitHub%20Secrets.%22)%3B%0A%20%20%20%20%20%20%2F%2F%20Initialize%20with%20empty%20string%20to%20allow%20UI%20to%20load%2C%20but%20calls%20will%20fail%20gracefully%0A%20%20%20%20%20%20aiInstance%20%3D%20new%20GoogleGenAI(%7B%20apiKey%3A%20''%20%7D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20aiInstance%20%3D%20new%20GoogleGenAI(%7B%20apiKey%3A%20apiKey%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20return%20aiInstance%3B%0A%7D%3B%0A%0A%2F%2F%201.%20Identify%20the%20landmark%20using%20gemini-2.5-flash%20(Faster%20Vision)%20with%20JSON%20Schema%0Aexport%20async%20function%20identifyLandmarkFromImage(base64Image%3A%20string%2C%20mimeType%3A%20string%2C%20language%3A%20string)%3A%20Promise%3CLandmarkIdentification%3E%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20getAI().models.generateContent(%7B%0A%20%20%20%20%20%20model%3A%20'gemini-2.5-flash'%2C%0A%20%20%20%20%20%20contents%3A%20%7B%0A%20%20%20%20%20%20%20%20parts%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inlineData%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20base64Image%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mimeType%3A%20mimeType%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%60Identify%20this%20landmark.%20Return%20a%20JSON%20object%20with%20the%20name%20of%20the%20landmark%20(including%20city%2Fcountry)%2C%20a%20confidence%20score%20between%200.0%20and%201.0%20(where%201.0%20is%20absolute%20certainty)%2C%20and%20a%20list%20of%20up%20to%203%20alternative%20landmark%20names%20if%20there%20is%20any%20ambiguity.%20If%20confident%2C%20alternatives%20can%20be%20empty.%20Translate%20all%20names%20to%20%24%7Blanguage%7D.%60%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20config%3A%20%7B%0A%20%20%20%20%20%20%20%20responseMimeType%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20responseSchema%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Type.OBJECT%2C%0A%20%20%20%20%20%20%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%20type%3A%20Type.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20confidence%3A%20%7B%20type%3A%20Type.NUMBER%2C%20description%3A%20%22A%20score%20between%200.0%20and%201.0%20indicating%20certainty%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20alternatives%3A%20%7B%20type%3A%20Type.ARRAY%2C%20items%3A%20%7B%20type%3A%20Type.STRING%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20required%3A%20%5B'name'%2C%20'confidence'%2C%20'alternatives'%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20text%20%3D%20response.text%3B%0A%20%20%20%20if%20(!text)%20throw%20new%20Error(%22Could%20not%20identify%20landmark%22)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Parse%20JSON%20response%0A%20%20%20%20const%20data%20%3D%20JSON.parse(text)%20as%20LandmarkIdentification%3B%0A%20%20%20%20return%20data%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20console.error(%22Error%20identifying%20landmark%3A%22%2C%20error)%3B%0A%20%20%20%20throw%20error%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%202.%20Get%20detailed%20history%20using%20gemini-2.5-flash%20with%20Google%20Search%20(Search%20Grounding)%0Aexport%20async%20function%20getLandmarkDetails(landmarkName%3A%20string%2C%20language%3A%20string)%3A%20Promise%3C%7B%20text%3A%20string%3B%20sources%3A%20GroundingChunk%5B%5D%20%7D%3E%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20getAI().models.generateContent(%7B%0A%20%20%20%20%20%20model%3A%20%22gemini-2.5-flash%22%2C%0A%20%20%20%20%20%20contents%3A%20%60Tell%20me%20the%20history%20and%203%20interesting%20hidden%20facts%20about%20%24%7BlandmarkName%7D%20in%20%24%7Blanguage%7D.%20Keep%20the%20tone%20engaging%2C%20like%20a%20passionate%20tour%20guide.%20Limit%20to%20150%20words.%60%2C%0A%20%20%20%20%20%20config%3A%20%7B%0A%20%20%20%20%20%20%20%20tools%3A%20%5B%7B%20googleSearch%3A%20%7B%7D%20%7D%5D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20text%20%3D%20response.text%20%7C%7C%20%22No%20details%20available.%22%3B%0A%20%20%20%20const%20chunks%20%3D%20response.candidates%3F.%5B0%5D%3F.groundingMetadata%3F.groundingChunks%20as%20GroundingChunk%5B%5D%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20return%20%7B%20text%2C%20sources%3A%20chunks%20%7D%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20console.error(%22Error%20fetching%20details%3A%22%2C%20error)%3B%0A%20%20%20%20throw%20error%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%203.%20Generate%20speech%20using%20gemini-2.5-flash-preview-tts%20(TTS)%0Aexport%20async%20function%20generateNarrationAudio(text%3A%20string)%3A%20Promise%3CAudioBuffer%20%7C%20null%3E%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20getAI().models.generateContent(%7B%0A%20%20%20%20%20%20model%3A%20%22gemini-2.5-flash-preview-tts%22%2C%0A%20%20%20%20%20%20contents%3A%20%5B%7B%20parts%3A%20%5B%7B%20text%3A%20text%20%7D%5D%20%7D%5D%2C%0A%20%20%20%20%20%20config%3A%20%7B%0A%20%20%20%20%20%20%20%20responseModalities%3A%20%5BModality.AUDIO%5D%2C%0A%20%20%20%20%20%20%20%20speechConfig%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20voiceConfig%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prebuiltVoiceConfig%3A%20%7B%20voiceName%3A%20'Kore'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20base64Audio%20%3D%20response.candidates%3F.%5B0%5D%3F.content%3F.parts%3F.%5B0%5D%3F.inlineData%3F.data%3B%0A%20%20%20%20if%20(!base64Audio)%20return%20null%3B%0A%0A%20%20%20%20const%20audioContext%20%3D%20new%20(window.AudioContext%20%7C%7C%20(window%20as%20any).webkitAudioContext)(%7B%20sampleRate%3A%2024000%20%7D)%3B%0A%20%20%20%20const%20audioBuffer%20%3D%20await%20decodeAudioData(%0A%20%20%20%20%20%20decodeBase64(base64Audio)%2C%0A%20%20%20%20%20%20audioContext%2C%0A%20%20%20%20%20%2024000%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%0A%20%20%20%20return%20audioBuffer%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20console.error(%22Error%20generating%20audio%3A%22%2C%20error)%3B%0A%20%20%20%20return%20null%3B%0A%20%20%7D%0A%7D`,
  "components/PhotoInput.tsx": `import%20React%2C%20%7B%20useRef%20%7D%20from%20'react'%3B%0Aimport%20%7B%20Camera%2C%20Upload%2C%20Image%20as%20ImageIcon%20%7D%20from%20'lucide-react'%3B%0Aimport%20%7B%20Translation%20%7D%20from%20'..%2Ftypes'%3B%0A%0Ainterface%20PhotoInputProps%20%7B%0A%20%20onImageSelect%3A%20(file%3A%20File)%20%3D%3E%20void%3B%0A%20%20t%3A%20Translation%3B%0A%7D%0A%0Aexport%20const%20PhotoInput%3A%20React.FC%3CPhotoInputProps%3E%20%3D%20(%7B%20onImageSelect%2C%20t%20%7D)%20%3D%3E%20%7B%0A%20%20const%20fileInputRef%20%3D%20useRef%3CHTMLInputElement%3E(null)%3B%0A%0A%20%20const%20handleFileChange%20%3D%20(e%3A%20React.ChangeEvent%3CHTMLInputElement%3E)%20%3D%3E%20%7B%0A%20%20%20%20if%20(e.target.files%20%26%26%20e.target.files%5B0%5D)%20%7B%0A%20%20%20%20%20%20onImageSelect(e.target.files%5B0%5D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20return%20(%0A%20%20%20%20%3Cdiv%20className%3D%22flex%20flex-col%20items-center%20justify-center%20w-full%20h-full%20p-6%20pt-20%20animate-fade-in%22%3E%0A%20%20%20%20%20%20%3Cdiv%20className%3D%22max-w-md%20w-full%20bg-slate-800%2F80%20backdrop-blur-lg%20border%20border-slate-700%20rounded-3xl%20p-8%20shadow-2xl%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22text-center%20mb-8%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22bg-indigo-500%2F20%20w-16%20h-16%20rounded-2xl%20flex%20items-center%20justify-center%20mx-auto%20mb-4%20text-indigo-400%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CCamera%20size%3D%7B32%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ch2%20className%3D%22text-2xl%20font-bold%20text-white%20mb-2%22%3E%7Bt.startTitle%7D%3C%2Fh2%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-slate-400%22%3E%7Bt.startSubtitle%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22space-y-4%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7B()%20%3D%3E%20fileInputRef.current%3F.click()%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22w-full%20group%20relative%20flex%20items-center%20justify-center%20gap-3%20bg-gradient-to-r%20from-indigo-600%20to-purple-600%20hover%3Afrom-indigo-500%20hover%3Ato-purple-500%20text-white%20font-semibold%20py-4%20px-6%20rounded-xl%20transition-all%20duration-300%20transform%20hover%3Ascale-%5B1.02%5D%20shadow-lg%20shadow-indigo-500%2F25%22%0A%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CUpload%20size%3D%7B20%7D%20className%3D%22group-hover%3A-translate-y-0.5%20transition-transform%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%7Bt.uploadBtn%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3D%22file%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20accept%3D%22image%2F*%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22hidden%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ref%3D%7BfileInputRef%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20onChange%3D%7BhandleFileChange%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Mobile%20camera%20trigger%20usually%20handled%20by%20file%20input%20with%20capture%3D%22environment%22%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3D%22file%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20accept%3D%22image%2F*%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20capture%3D%22environment%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3D%22cameraInput%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22hidden%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20onChange%3D%7BhandleFileChange%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20htmlFor%3D%22cameraInput%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22w-full%20cursor-pointer%20flex%20items-center%20justify-center%20gap-3%20bg-slate-700%20hover%3Abg-slate-600%20text-slate-200%20font-semibold%20py-4%20px-6%20rounded-xl%20transition-all%20duration-300%20border%20border-slate-600%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CCamera%20size%3D%7B20%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%7Bt.cameraBtn%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Flabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22mt-8%20pt-6%20border-t%20border-slate-700%2F50%20flex%20items-center%20justify-center%20gap-2%20text-xs%20text-slate-500%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3CImageIcon%20size%3D%7B14%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%7Bt.supports%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20)%3B%0A%7D%3B`,
  "components/TourCard.tsx": `import%20React%2C%20%7B%20useEffect%2C%20useState%2C%20useRef%20%7D%20from%20'react'%3B%0Aimport%20%7B%20Play%2C%20Pause%2C%20ExternalLink%2C%20MapPin%2C%20Sparkles%2C%20Loader2%2C%20Share2%2C%20Check%20%7D%20from%20'lucide-react'%3B%0Aimport%20%7B%20AnalysisResult%2C%20Translation%20%7D%20from%20'..%2Ftypes'%3B%0A%0Ainterface%20TourCardProps%20%7B%0A%20%20result%3A%20AnalysisResult%3B%0A%20%20onReset%3A%20()%20%3D%3E%20void%3B%0A%20%20t%3A%20Translation%3B%0A%20%20isAudioLoading%3F%3A%20boolean%3B%0A%7D%0A%0Aexport%20const%20TourCard%3A%20React.FC%3CTourCardProps%3E%20%3D%20(%7B%20result%2C%20onReset%2C%20t%2C%20isAudioLoading%20%3D%20false%20%7D)%20%3D%3E%20%7B%0A%20%20const%20%5BisPlaying%2C%20setIsPlaying%5D%20%3D%20useState(false)%3B%0A%20%20const%20%5BjustShared%2C%20setJustShared%5D%20%3D%20useState(false)%3B%0A%20%20const%20audioContextRef%20%3D%20useRef%3CAudioContext%20%7C%20null%3E(null)%3B%0A%20%20const%20sourceNodeRef%20%3D%20useRef%3CAudioBufferSourceNode%20%7C%20null%3E(null)%3B%0A%20%20const%20startTimeRef%20%3D%20useRef%3Cnumber%3E(0)%3B%0A%20%20const%20pauseTimeRef%20%3D%20useRef%3Cnumber%3E(0)%3B%0A%0A%20%20%2F%2F%20Initialize%20audio%20context%20lazily%0A%20%20const%20getAudioContext%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(!audioContextRef.current)%20%7B%0A%20%20%20%20%20%20audioContextRef.current%20%3D%20new%20(window.AudioContext%20%7C%7C%20(window%20as%20any).webkitAudioContext)(%7B%20sampleRate%3A%2024000%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20audioContextRef.current%3B%0A%20%20%7D%3B%0A%0A%20%20const%20playAudio%20%3D%20async%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(!result.audioBuffer)%20return%3B%0A%20%20%20%20%0A%20%20%20%20const%20ctx%20%3D%20getAudioContext()%3B%0A%20%20%20%20if%20(ctx.state%20%3D%3D%3D%20'suspended')%20%7B%0A%20%20%20%20%20%20await%20ctx.resume()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20a%20new%20source%20node%0A%20%20%20%20const%20source%20%3D%20ctx.createBufferSource()%3B%0A%20%20%20%20source.buffer%20%3D%20result.audioBuffer%3B%0A%20%20%20%20source.connect(ctx.destination)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20start%20time%20based%20on%20pause%0A%20%20%20%20const%20offset%20%3D%20pauseTimeRef.current%20%25%20result.audioBuffer.duration%3B%0A%20%20%20%20source.start(0%2C%20offset)%3B%0A%20%20%20%20%0A%20%20%20%20startTimeRef.current%20%3D%20ctx.currentTime%20-%20offset%3B%0A%20%20%20%20sourceNodeRef.current%20%3D%20source%3B%0A%20%20%20%20setIsPlaying(true)%3B%0A%0A%20%20%20%20source.onended%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20Only%20reset%20if%20we%20naturally%20finished%0A%20%20%20%20%20%20%20setIsPlaying(false)%3B%0A%20%20%20%20%20%20%20pauseTimeRef.current%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%0A%20%20const%20pauseAudio%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(sourceNodeRef.current%20%26%26%20audioContextRef.current)%20%7B%0A%20%20%20%20%20%20sourceNodeRef.current.stop()%3B%0A%20%20%20%20%20%20sourceNodeRef.current.disconnect()%3B%0A%20%20%20%20%20%20pauseTimeRef.current%20%3D%20audioContextRef.current.currentTime%20-%20startTimeRef.current%3B%0A%20%20%20%20%20%20sourceNodeRef.current%20%3D%20null%3B%0A%20%20%20%20%20%20setIsPlaying(false)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20toggleAudio%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(isPlaying)%20%7B%0A%20%20%20%20%20%20pauseAudio()%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20playAudio()%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20handleShare%20%3D%20async%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Generate%20Google%20Maps%20URL%20for%20the%20location%0A%20%20%20%20const%20mapsUrl%20%3D%20%60https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3D%24%7BencodeURIComponent(result.landmarkName)%7D%60%3B%0A%20%20%20%20%0A%20%20%20%20if%20(navigator.share)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20navigator.share(%7B%0A%20%20%20%20%20%20%20%20%20%20title%3A%20result.landmarkName%2C%0A%20%20%20%20%20%20%20%20%20%20text%3A%20%60Check%20out%20%24%7Bresult.landmarkName%7D%20on%20Google%20Maps!%60%2C%0A%20%20%20%20%20%20%20%20%20%20url%3A%20mapsUrl%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20console.log('Error%20sharing'%2C%20err)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20Fallback%20to%20clipboard%20-%20Copy%20the%20URL%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20navigator.clipboard.writeText(mapsUrl)%3B%0A%20%20%20%20%20%20%20%20setJustShared(true)%3B%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20setJustShared(false)%2C%202000)%3B%0A%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Failed%20to%20copy'%2C%20err)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Cleanup%20on%20unmount%0A%20%20useEffect(()%20%3D%3E%20%7B%0A%20%20%20%20return%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(sourceNodeRef.current)%20%7B%0A%20%20%20%20%20%20%20%20sourceNodeRef.current.stop()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(audioContextRef.current)%20%7B%0A%20%20%20%20%20%20%20%20audioContextRef.current.close()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5B%5D)%3B%0A%0A%20%20%2F%2F%20Filter%20out%20unique%20links%20to%20avoid%20duplicates%0A%20%20const%20uniqueSources%20%3D%20result.groundingSources.filter(%0A%20%20%20%20(source%2C%20index%2C%20self)%20%3D%3E%0A%20%20%20%20%20%20index%20%3D%3D%3D%20self.findIndex((s)%20%3D%3E%20s.web%3F.uri%20%3D%3D%3D%20source.web%3F.uri)%0A%20%20)%3B%0A%0A%20%20return%20(%0A%20%20%20%20%3Cdiv%20className%3D%22fixed%20inset-0%20z-50%20flex%20flex-col%20justify-end%20sm%3Ajustify-center%20p-0%20sm%3Ap-6%20pointer-events-none%22%3E%0A%20%20%20%20%20%20%7B%2F*%20Overlay%20Background%20Gradient%20*%2F%7D%0A%20%20%20%20%20%20%3Cdiv%20className%3D%22absolute%20inset-0%20bg-gradient-to-t%20from-black%2F90%20via-black%2F50%20to-transparent%20pointer-events-none%22%20%2F%3E%0A%0A%20%20%20%20%20%20%7B%2F*%20Card%20Content%20*%2F%7D%0A%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%20pointer-events-auto%20w-full%20max-w-2xl%20mx-auto%20bg-slate-900%2F90%20backdrop-blur-xl%20border-t%20sm%3Aborder%20border-slate-700%2F50%20sm%3Arounded-3xl%20shadow-2xl%20overflow-hidden%20max-h-%5B85vh%5D%20flex%20flex-col%20animate-slide-up%22%3E%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7B%2F*%20Header%20Image%2FTitle%20Area%20*%2F%7D%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22p-6%20pb-2%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex%20items-start%20justify-between%20gap-4%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex%20items-center%20gap-2%20text-indigo-400%20mb-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CMapPin%20size%3D%7B16%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22text-xs%20font-bold%20uppercase%20tracking-wider%22%3E%7Bt.landmarkLabel%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%20className%3D%22text-2xl%20sm%3Atext-3xl%20font-bold%20text-white%20leading-tight%22%3E%7Bresult.landmarkName%7D%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Audio%20Control%20Button%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex-shrink-0%20w-12%20h-12%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BisAudioLoading%20%3F%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22w-12%20h-12%20rounded-full%20bg-indigo-600%2F50%20border%20border-indigo-500%2F50%20flex%20items-center%20justify-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CLoader2%20size%3D%7B20%7D%20className%3D%22text-indigo-200%20animate-spin%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20%3A%20result.audioBuffer%20%3F%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BtoggleAudio%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22w-12%20h-12%20rounded-full%20bg-indigo-600%20hover%3Abg-indigo-500%20text-white%20flex%20items-center%20justify-center%20shadow-lg%20shadow-indigo-500%2F30%20transition-all%20hover%3Ascale-105%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BisPlaying%20%3F%20%3CPause%20size%3D%7B20%7D%20fill%3D%22currentColor%22%20%2F%3E%20%3A%20%3CPlay%20size%3D%7B20%7D%20fill%3D%22currentColor%22%20className%3D%22ml-1%22%20%2F%3E%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20%3A%20null%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%7B%2F*%20Scrollable%20Content%20*%2F%7D%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22p-6%20pt-2%20overflow-y-auto%20custom-scrollbar%20space-y-6%22%3E%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Main%20Description%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22prose%20prose-invert%20prose-sm%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-slate-300%20leading-relaxed%20text-base%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bresult.detailedInfo%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Sources%20%2F%20Grounding%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%7BuniqueSources.length%20%3E%200%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22bg-slate-800%2F50%20rounded-xl%20p-4%20border%20border-slate-700%2F50%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%20className%3D%22text-xs%20font-semibold%20text-slate-400%20uppercase%20tracking-wider%20mb-3%20flex%20items-center%20gap-2%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CSparkles%20size%3D%7B12%7D%20className%3D%22text-amber-400%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bt.verifiedSources%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22space-y-2%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BuniqueSources.map((source%2C%20idx)%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source.web%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%3D%7Bidx%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20href%3D%7Bsource.web.uri%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%3D%22_blank%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel%3D%22noopener%20noreferrer%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex%20items-center%20gap-3%20p-2%20rounded-lg%20hover%3Abg-slate-700%2F50%20transition-colors%20group%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22w-8%20h-8%20rounded%20bg-slate-700%20flex%20items-center%20justify-center%20text-slate-400%20group-hover%3Atext-indigo-400%20transition-colors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CExternalLink%20size%3D%7B14%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex-1%20min-w-0%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-sm%20font-medium%20text-slate-200%20truncate%20group-hover%3Atext-indigo-300%20transition-colors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bsource.web.title%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-xs%20text-slate-500%20truncate%22%3E%7Bnew%20URL(source.web.uri).hostname%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fa%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%7B%2F*%20Footer%20Actions%20*%2F%7D%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22p-4%20border-t%20border-slate-800%20bg-slate-900%2F50%20backdrop-blur-sm%20flex%20gap-3%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BhandleShare%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex-1%20py-3%20px-4%20rounded-xl%20bg-slate-800%20hover%3Abg-slate-700%20text-slate-300%20font-medium%20transition-colors%20flex%20items-center%20justify-center%20gap-2%20border%20border-slate-700%22%0A%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%7BjustShared%20%3F%20%3CCheck%20size%3D%7B18%7D%20className%3D%22text-green-400%22%20%2F%3E%20%3A%20%3CShare2%20size%3D%7B18%7D%20%2F%3E%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%7BjustShared%20%3F%20t.shareSuccess%20%3A%20t.share%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BonReset%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex-%5B2%5D%20py-3%20px-4%20rounded-xl%20bg-gradient-to-r%20from-indigo-600%20to-purple-600%20hover%3Afrom-indigo-500%20hover%3Ato-purple-500%20text-white%20font-medium%20transition-colors%20flex%20items-center%20justify-center%20gap-2%20shadow-lg%20shadow-indigo-500%2F25%22%0A%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bt.scanAnother%7D%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20)%3B%0A%7D%3B`,
  "App.tsx": `import%20React%2C%20%7B%20useState%2C%20useEffect%20%7D%20from%20'react'%3B%0Aimport%20%7B%20PhotoInput%20%7D%20from%20'.%2Fcomponents%2FPhotoInput'%3B%0Aimport%20%7B%20TourCard%20%7D%20from%20'.%2Fcomponents%2FTourCard'%3B%0Aimport%20%7B%20LandmarkSelector%20%7D%20from%20'.%2Fcomponents%2FLandmarkSelector'%3B%0Aimport%20%7B%20HistoryView%20%7D%20from%20'.%2Fcomponents%2FHistoryView'%3B%0Aimport%20%7B%20ScanningView%20%7D%20from%20'.%2Fcomponents%2FScanningView'%3B%0Aimport%20%7B%20SkeletonCard%20%7D%20from%20'.%2Fcomponents%2FSkeletonCard'%3B%0Aimport%20%7B%20identifyLandmarkFromImage%2C%20getLandmarkDetails%2C%20generateNarrationAudio%20%7D%20from%20'.%2Fservices%2FgeminiService'%3B%0Aimport%20%7B%20saveHistoryItem%2C%20getHistory%2C%20createThumbnail%2C%20clearHistory%20%7D%20from%20'.%2Fservices%2FstorageService'%3B%0Aimport%20%7B%20AppState%2C%20AnalysisResult%2C%20LandmarkIdentification%2C%20User%2C%20HistoryItem%20%7D%20from%20'.%2Ftypes'%3B%0Aimport%20%7B%20Loader2%2C%20Globe%2C%20History%2C%20UserCircle%2C%20LogOut%2C%20Zap%2C%20AlertTriangle%20%7D%20from%20'lucide-react'%3B%0Aimport%20%7B%20Logo%20%7D%20from%20'.%2Fcomponents%2FLogo'%3B%0Aimport%20%7B%20LANGUAGES%2C%20translations%20%7D%20from%20'.%2Ftranslations'%3B%0A%0Adeclare%20global%20%7B%0A%20%20interface%20Window%20%7B%0A%20%20%20%20google%3A%20any%3B%0A%20%20%7D%0A%7D%0A%0Aconst%20App%3A%20React.FC%20%3D%20()%20%3D%3E%20%7B%0A%20%20const%20%5Bstate%2C%20setState%5D%20%3D%20useState%3CAppState%3E(AppState.IDLE)%3B%0A%20%20const%20%5BselectedImage%2C%20setSelectedImage%5D%20%3D%20useState%3Cstring%20%7C%20null%3E(null)%3B%0A%20%20const%20%5BidentificationResult%2C%20setIdentificationResult%5D%20%3D%20useState%3CLandmarkIdentification%20%7C%20null%3E(null)%3B%0A%20%20const%20%5Bresult%2C%20setResult%5D%20%3D%20useState%3CAnalysisResult%20%7C%20null%3E(null)%3B%0A%20%20const%20%5BerrorMsg%2C%20setErrorMsg%5D%20%3D%20useState%3Cstring%3E('')%3B%0A%20%20const%20%5BlangCode%2C%20setLangCode%5D%20%3D%20useState%3Cstring%3E('en')%3B%0A%20%20const%20%5BisLangMenuOpen%2C%20setIsLangMenuOpen%5D%20%3D%20useState(false)%3B%0A%20%20const%20%5BisGeneratingAudio%2C%20setIsGeneratingAudio%5D%20%3D%20useState(false)%3B%0A%20%20const%20%5BmissingCreds%2C%20setMissingCreds%5D%20%3D%20useState%3Cstring%5B%5D%3E(%5B%5D)%3B%0A%20%20%0A%20%20%2F%2F%20User%20%26%20History%20State%0A%20%20const%20%5Buser%2C%20setUser%5D%20%3D%20useState%3CUser%20%7C%20null%3E(null)%3B%0A%20%20const%20%5BuserHistory%2C%20setUserHistory%5D%20%3D%20useState%3CHistoryItem%5B%5D%3E(%5B%5D)%3B%0A%20%20const%20%5BisUserMenuOpen%2C%20setIsUserMenuOpen%5D%20%3D%20useState(false)%3B%0A%0A%20%20%2F%2F%20Helper%20to%20get%20current%20translation%20object%20and%20language%20name%0A%20%20const%20t%20%3D%20translations%5BlangCode%5D%20%7C%7C%20translations%5B'en'%5D%3B%0A%20%20const%20currentLangName%20%3D%20LANGUAGES.find(l%20%3D%3E%20l.code%20%3D%3D%3D%20langCode)%3F.name%20%7C%7C%20'English'%3B%0A%0A%20%20%2F%2F%20Check%20for%20credentials%20on%20mount%0A%20%20useEffect(()%20%3D%3E%20%7B%0A%20%20%20%20const%20missing%20%3D%20%5B%5D%3B%0A%20%20%20%20if%20(!process.env.API_KEY)%20missing.push(%22API_KEY%22)%3B%0A%20%20%20%20if%20(!process.env.GOOGLE_CLIENT_ID)%20missing.push(%22GOOGLE_CLIENT_ID%22)%3B%0A%20%20%20%20setMissingCreds(missing)%3B%0A%20%20%7D%2C%20%5B%5D)%3B%0A%0A%20%20%2F%2F%20---%20Google%20Login%20Implementation%20---%0A%20%20const%20handleGoogleLogin%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Get%20Client%20ID%20from%20environment%20variables%20(Vite%20config)%0A%20%20%20%20const%20CLIENT_ID%20%3D%20process.env.GOOGLE_CLIENT_ID%3B%0A%0A%20%20%20%20const%20performMockLogin%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20console.warn(%22Using%20Mock%20Login%20(Demo%20Mode)%20-%20Missing%20CLIENT_ID%20or%20Google%20Script%22)%3B%0A%20%20%20%20%20%20%20%2F%2F%20Simulate%20network%20delay%0A%20%20%20%20%20%20%20const%20mockUser%3A%20User%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20name%3A%20%22Guest%20Traveler%22%2C%0A%20%20%20%20%20%20%20%20%20email%3A%20%22guest%40snaptour.app%22%2C%0A%20%20%20%20%20%20%20%20%20picture%3A%20%22https%3A%2F%2Fui-avatars.com%2Fapi%2F%3Fname%3DGuest%2BTraveler%26background%3Drandom%26color%3Dfff%26background%3D6366f1%22%2C%0A%20%20%20%20%20%20%20%20%20accessToken%3A%20%22mock_token_123%22%0A%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20setUser(mockUser)%3B%0A%20%20%20%20%20%20%20setUserHistory(getHistory(mockUser.email))%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Check%20if%20ID%20is%20configured%20and%20script%20is%20loaded%0A%20%20%20%20if%20(!CLIENT_ID%20%7C%7C%20!window.google)%20%7B%0A%20%20%20%20%20%20performMockLogin()%3B%0A%20%20%20%20%20%20setIsUserMenuOpen(false)%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20const%20client%20%3D%20window.google.accounts.oauth2.initTokenClient(%7B%0A%20%20%20%20%20%20%20%20client_id%3A%20CLIENT_ID%2C%0A%20%20%20%20%20%20%20%20scope%3A%20'https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email'%2C%0A%20%20%20%20%20%20%20%20callback%3A%20async%20(tokenResponse%3A%20any)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(tokenResponse%20%26%26%20tokenResponse.access_token)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20User%20Info%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20userInfoRes%20%3D%20await%20fetch('https%3A%2F%2Fwww.googleapis.com%2Foauth2%2Fv3%2Fuserinfo'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20Authorization%3A%20%60Bearer%20%24%7BtokenResponse.access_token%7D%60%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20userInfo%20%3D%20await%20userInfoRes.json()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setUser(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20userInfo.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20email%3A%20userInfo.email%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20picture%3A%20userInfo.picture%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20accessToken%3A%20tokenResponse.access_token%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20their%20history%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setUserHistory(getHistory(userInfo.email))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Failed%20to%20fetch%20user%20info%22%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20client.requestAccessToken()%3B%0A%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20console.error(%22Google%20Login%20Error%3A%22%2C%20err)%3B%0A%20%20%20%20%20%20%2F%2F%20Fallback%20to%20mock%20if%20initialization%20fails%0A%20%20%20%20%20%20performMockLogin()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20setIsUserMenuOpen(false)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20handleLogout%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(window.google%20%26%26%20user%3F.accessToken%20%26%26%20user.accessToken%20!%3D%3D%20%22mock_token_123%22)%20%7B%0A%20%20%20%20%20%20window.google.accounts.oauth2.revoke(user%3F.accessToken%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.log('Consent%20revoked')%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setUser(null)%3B%0A%20%20%20%20setUserHistory(%5B%5D)%3B%0A%20%20%20%20setIsUserMenuOpen(false)%3B%0A%20%20%20%20if%20(state%20%3D%3D%3D%20AppState.VIEWING_HISTORY)%20%7B%0A%20%20%20%20%20%20%20setState(AppState.IDLE)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20handleClearHistory%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(user)%20%7B%0A%20%20%20%20%20%20clearHistory(user.email)%3B%0A%20%20%20%20%20%20setUserHistory(%5B%5D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20handleHistorySelect%20%3D%20async%20(item%3A%20HistoryItem)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Restore%20the%20text%20content%20immediately%0A%20%20%20%20const%20textContent%20%3D%20item.detailedInfo%20%7C%7C%20item.summary%3B%0A%20%20%20%20%0A%20%20%20%20setResult(%7B%0A%20%20%20%20%20%20landmarkName%3A%20item.landmarkName%2C%0A%20%20%20%20%20%20detailedInfo%3A%20textContent%2C%0A%20%20%20%20%20%20groundingSources%3A%20item.groundingSources%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20audioBuffer%3A%20null%20%2F%2F%20Audio%20isn't%20stored%20in%20local%20storage%2C%20needs%20regeneration%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20background%20image%20from%20thumbnail%20(low%20res%2C%20but%20better%20than%20nothing)%0A%20%20%20%20%2F%2F%20Note%3A%20To%20render%20properly%20in%20style%20prop%2C%20it%20needs%20data%20URI%20prefix%0A%20%20%20%20setSelectedImage(%60data%3Aimage%2Fjpeg%3Bbase64%2C%24%7Bitem.thumbnail%7D%60)%3B%0A%20%20%20%20%0A%20%20%20%20setState(AppState.SHOWING_RESULT)%3B%0A%0A%20%20%20%20%2F%2F%20Regenerate%20Audio%20in%20background%20so%20user%20can%20listen%20again%0A%20%20%20%20setIsGeneratingAudio(true)%3B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20const%20audioBuffer%20%3D%20await%20generateNarrationAudio(textContent)%3B%0A%20%20%20%20%20%20setResult((prev)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(prev%20%26%26%20prev.landmarkName%20%3D%3D%3D%20item.landmarkName)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%20...prev%2C%20audioBuffer%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20prev%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20catch%20(audioError)%20%7B%0A%20%20%20%20%20%20console.error(%22Failed%20to%20regenerate%20audio%20from%20history%22%2C%20audioError)%3B%0A%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20setIsGeneratingAudio(false)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20handleImageSelect%20%3D%20(file%3A%20File)%20%3D%3E%20%7B%0A%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0A%20%20%20%20reader.onload%20%3D%20async%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20base64Data%20%3D%20e.target%3F.result%20as%20string%3B%0A%20%20%20%20%20%20const%20base64Image%20%3D%20base64Data.split('%2C')%5B1%5D%3B%0A%20%20%20%20%20%20const%20mimeType%20%3D%20file.type%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20setSelectedImage(base64Data)%3B%0A%20%20%20%20%20%20%2F%2F%20Pass%20base64Data%20directly%20to%20avoid%20stale%20state%20in%20the%20async%20chain%0A%20%20%20%20%20%20processTour(base64Image%2C%20mimeType%2C%20base64Data)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20reader.readAsDataURL(file)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20processTour%20%3D%20async%20(base64Image%3A%20string%2C%20mimeType%3A%20string%2C%20fullImageData%3A%20string)%20%3D%3E%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20setState(AppState.ANALYZING_IMAGE)%3B%0A%20%20%20%20%20%20const%20idResult%20%3D%20await%20identifyLandmarkFromImage(base64Image%2C%20mimeType%2C%20currentLangName)%3B%0A%20%20%20%20%20%20setIdentificationResult(idResult)%3B%0A%0A%20%20%20%20%20%20const%20CONFIDENCE_THRESHOLD%20%3D%200.8%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(idResult.confidence%20%3E%3D%20CONFIDENCE_THRESHOLD)%20%7B%0A%20%20%20%20%20%20%20%20fetchDetails(idResult.name%2C%20fullImageData)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20setState(AppState.SELECTING_LANDMARK)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20setErrorMsg(t.error)%3B%0A%20%20%20%20%20%20setState(AppState.ERROR)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20fetchDetails%20%3D%20async%20(landmarkName%3A%20string%2C%20imageOverride%3F%3A%20string)%20%3D%3E%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20setState(AppState.FETCHING_DETAILS)%3B%0A%20%20%20%20%20%20const%20%7B%20text%3A%20detailedInfo%2C%20sources%20%7D%20%3D%20await%20getLandmarkDetails(landmarkName%2C%20currentLangName)%3B%0A%0A%20%20%20%20%20%20setResult(%7B%0A%20%20%20%20%20%20%20%20landmarkName%2C%0A%20%20%20%20%20%20%20%20detailedInfo%2C%0A%20%20%20%20%20%20%20%20groundingSources%3A%20sources%2C%0A%20%20%20%20%20%20%20%20audioBuffer%3A%20null%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20setState(AppState.SHOWING_RESULT)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Save%20to%20History%20if%20Logged%20In%0A%20%20%20%20%20%20%2F%2F%20Use%20imageOverride%20(from%20arg)%20if%20available%2C%20otherwise%20fallback%20to%20state%0A%20%20%20%20%20%20const%20imageToSave%20%3D%20imageOverride%20%7C%7C%20selectedImage%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(user%20%26%26%20imageToSave)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Optimize%20image%20size%20before%20saving%20to%20localStorage%20to%20avoid%20QuotaExceededError%0A%20%20%20%20%20%20%20%20const%20thumbnail%20%3D%20await%20createThumbnail(imageToSave)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20historyItem%3A%20HistoryItem%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20id%3A%20Date.now().toString()%2C%0A%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20Date.now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20landmarkName%3A%20landmarkName%2C%0A%20%20%20%20%20%20%20%20%20%20%20summary%3A%20detailedInfo.substring(0%2C%20100)%20%2B%20%22...%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20detailedInfo%3A%20detailedInfo%2C%20%2F%2F%20Save%20full%20text%20for%20restoration%0A%20%20%20%20%20%20%20%20%20%20%20groundingSources%3A%20sources%2C%20%2F%2F%20Save%20sources%20for%20restoration%0A%20%20%20%20%20%20%20%20%20%20%20thumbnail%3A%20thumbnail%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20saveHistoryItem(user.email%2C%20historyItem)%3B%0A%20%20%20%20%20%20%20%20setUserHistory(getHistory(user.email))%3B%20%2F%2F%20Refresh%20local%20state%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20setIsGeneratingAudio(true)%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20audioBuffer%20%3D%20await%20generateNarrationAudio(detailedInfo)%3B%0A%20%20%20%20%20%20%20%20setResult((prev)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(prev%20%26%26%20prev.landmarkName%20%3D%3D%3D%20landmarkName)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%20...prev%2C%20audioBuffer%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20prev%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20catch%20(audioError)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22Audio%20generation%20failed%22%2C%20audioError)%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20setIsGeneratingAudio(false)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20setErrorMsg(t.error)%3B%0A%20%20%20%20%20%20setState(AppState.ERROR)%3B%0A%20%20%20%20%20%20setIsGeneratingAudio(false)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20resetApp%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20setState(AppState.IDLE)%3B%0A%20%20%20%20setSelectedImage(null)%3B%0A%20%20%20%20setResult(null)%3B%0A%20%20%20%20setIdentificationResult(null)%3B%0A%20%20%20%20setErrorMsg('')%3B%0A%20%20%20%20setIsGeneratingAudio(false)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20handleLanguageChange%20%3D%20(code%3A%20string)%20%3D%3E%20%7B%0A%20%20%20%20setLangCode(code)%3B%0A%20%20%20%20setIsLangMenuOpen(false)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20backgroundStyle%20%3D%20selectedImage%20%3F%20%7B%0A%20%20%20%20backgroundImage%3A%20%60url(%24%7BselectedImage%7D)%60%2C%0A%20%20%20%20backgroundSize%3A%20'cover'%2C%0A%20%20%20%20backgroundPosition%3A%20'center'%2C%0A%20%20%7D%20%3A%20%7B%7D%3B%0A%0A%20%20return%20(%0A%20%20%20%20%3Cdiv%20className%3D%22relative%20w-full%20h-screen%20overflow-hidden%20bg-slate-900%20text-white%22%20style%3D%7BbackgroundStyle%7D%3E%0A%20%20%20%20%20%20%7BselectedImage%20%26%26%20%3Cdiv%20className%3D%22absolute%20inset-0%20bg-black%2F40%20backdrop-blur-sm%20transition-all%20duration-1000%22%20%2F%3E%7D%0A%0A%20%20%20%20%20%20%7B%2F*%20DIAGNOSTIC%20BANNER%20*%2F%7D%0A%20%20%20%20%20%20%7BmissingCreds.length%20%3E%200%20%26%26%20(%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22absolute%20top-0%20left-0%20right-0%20bg-red-600%20text-white%20z-%5B100%5D%20px-4%20py-2%20flex%20items-center%20justify-between%20shadow-xl%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex%20items-center%20gap-2%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3CAlertTriangle%20size%3D%7B18%7D%20className%3D%22fill-white%20text-red-600%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22text-sm%20font-bold%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Setup%20Required%3A%20Missing%20%7BmissingCreds.join(%22%20%26%20%22)%7D.%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Check%20GitHub%20Settings%20%26rarr%3B%20Secrets.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onClick%3D%7B()%20%3D%3E%20setMissingCreds(%5B%5D)%7D%20className%3D%22text-xs%20bg-red-800%20hover%3Abg-red-700%20px-2%20py-1%20rounded%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20Dismiss%0A%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%7B%2F*%20Navbar%20*%2F%7D%0A%20%20%20%20%20%20%3Cdiv%20className%3D%7B%60absolute%20%24%7BmissingCreds.length%20%3E%200%20%3F%20'top-10'%20%3A%20'top-0'%7D%20left-0%20right-0%20p-6%20z-40%20flex%20items-center%20justify-between%20pointer-events-none%20transition-all%60%7D%3E%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7B%2F*%20Brand%20*%2F%7D%0A%20%20%20%20%20%20%20%20%3Cdiv%20%0A%20%20%20%20%20%20%20%20%20%20onClick%3D%7BresetApp%7D%0A%20%20%20%20%20%20%20%20%20%20className%3D%22flex%20items-center%20gap-2%20pointer-events-auto%20cursor-pointer%20group%22%0A%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22bg-black%2F20%20backdrop-blur-md%20p-2%20rounded-2xl%20border%20border-white%2F10%20shadow-lg%20group-hover%3Abg-white%2F10%20transition-colors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%3CLogo%20className%3D%22w-8%20h-8%20drop-shadow-lg%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22font-bold%20tracking-tight%20text-white%20text-xl%20hidden%20sm%3Ainline%20drop-shadow-md%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20Snap%3Cspan%20className%3D%22text-transparent%20bg-clip-text%20bg-gradient-to-r%20from-indigo-400%20to-purple-400%22%3ETour%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex%20items-center%20gap-3%20pointer-events-auto%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Language%20Selector%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7B()%20%3D%3E%20setIsLangMenuOpen(!isLangMenuOpen)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex%20items-center%20gap-2%20bg-black%2F20%20backdrop-blur-md%20px-3%20py-2%20rounded-full%20border%20border-white%2F10%20hover%3Abg-white%2F10%20transition-colors%20shadow-lg%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CGlobe%20size%3D%7B18%7D%20className%3D%22text-indigo-300%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%2F*%20Show%20only%20Name%2C%20not%20Flag%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22text-sm%20font-medium%20hidden%20sm%3Ainline%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BLANGUAGES.find(l%20%3D%3E%20l.code%20%3D%3D%3D%20langCode)%3F.name%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7BisLangMenuOpen%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22absolute%20right-0%20top-full%20mt-2%20w-48%20bg-slate-800%20border%20border-slate-700%20rounded-xl%20shadow-xl%20overflow-hidden%20z-50%20animate-fade-in%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BLANGUAGES.map((lang)%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%3D%7Blang.code%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7B()%20%3D%3E%20handleLanguageChange(lang.code)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%7B%60w-full%20text-left%20px-4%20py-3%20text-sm%20hover%3Abg-slate-700%20transition-colors%20flex%20items-center%20justify-between%20%24%7BlangCode%20%3D%3D%3D%20lang.code%20%3F%20'bg-slate-700%2F50%20text-indigo-400'%20%3A%20'text-slate-200'%7D%60%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%7Blang.label%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BlangCode%20%3D%3D%3D%20lang.code%20%26%26%20%3Cdiv%20className%3D%22w-1.5%20h-1.5%20rounded-full%20bg-indigo-400%22%20%2F%3E%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%2F*%20User%20%2F%20Login%20Button%20*%2F%7D%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B!user%20%3F%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20NOT%20LOGGED%20IN%20-%20Show%20Google%20Button%20Directly%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BhandleGoogleLogin%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex%20items-center%20gap-2%20bg-white%20text-slate-900%20px-4%20py-2%20rounded-full%20font-medium%20text-sm%20hover%3Abg-slate-200%20transition-colors%20shadow-lg%20border%20border-slate-300%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Csvg%20className%3D%22w-4%20h-4%20flex-shrink-0%22%20viewBox%3D%220%200%2024%2024%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z%22%20fill%3D%22%234285F4%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z%22%20fill%3D%22%2334A853%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z%22%20fill%3D%22%23FBBC05%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z%22%20fill%3D%22%23EA4335%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fsvg%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22hidden%20sm%3Ainline%22%3E%7Bt.login%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22sm%3Ahidden%22%3ESign%20in%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%3A%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20LOGGED%20IN%20-%20Show%20Avatar%20%26%20Menu%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7B()%20%3D%3E%20setIsUserMenuOpen(!isUserMenuOpen)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22flex%20items-center%20gap-2%20bg-black%2F20%20backdrop-blur-md%20px-2%20py-2%20sm%3Apx-3%20sm%3Apy-2%20rounded-full%20border%20border-white%2F10%20hover%3Abg-white%2F10%20transition-colors%20shadow-lg%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cimg%20src%3D%7Buser.picture%7D%20alt%3D%7Buser.name%7D%20className%3D%22w-5%20h-5%20rounded-full%20border%20border-white%2F20%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20className%3D%22text-sm%20font-medium%20hidden%20sm%3Ainline%20max-w-%5B80px%5D%20truncate%22%3E%7Buser.name%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7BisUserMenuOpen%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22absolute%20right-0%20top-full%20mt-2%20w-56%20bg-slate-800%20border%20border-slate-700%20rounded-xl%20shadow-xl%20overflow-hidden%20z-50%20animate-fade-in%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22px-4%20py-3%20border-b%20border-slate-700%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-sm%20font-semibold%20text-white%22%3E%7Buser.name%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-xs%20text-slate-400%20truncate%22%3E%7Buser.email%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7B()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setState(AppState.VIEWING_HISTORY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setIsUserMenuOpen(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22w-full%20text-left%20px-4%20py-3%20text-sm%20hover%3Abg-slate-700%20transition-colors%20flex%20items-center%20gap-3%20text-slate-200%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CHistory%20size%3D%7B16%7D%20className%3D%22text-indigo-400%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bt.history%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BhandleLogout%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22w-full%20text-left%20px-4%20py-3%20text-sm%20hover%3Abg-slate-700%20transition-colors%20flex%20items-center%20gap-3%20text-red-300%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CLogOut%20size%3D%7B16%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bt.logout%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%7B%2F*%20Main%20Content%20Area%20*%2F%7D%0A%20%20%20%20%20%20%3Cdiv%20className%3D%22relative%20z-10%20w-full%20h-full%20flex%20flex-col%22%3E%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.IDLE%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%3CPhotoInput%20onImageSelect%3D%7BhandleImageSelect%7D%20t%3D%7Bt%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.SELECTING_LANDMARK%20%26%26%20identificationResult%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%3CLandmarkSelector%20%0A%20%20%20%20%20%20%20%20%20%20%20%20identification%3D%7BidentificationResult%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20onSelect%3D%7B(name)%20%3D%3E%20fetchDetails(name)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20onCancel%3D%7BresetApp%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20t%3D%7Bt%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.VIEWING_HISTORY%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%3CHistoryView%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20items%3D%7BuserHistory%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20onClose%3D%7B()%20%3D%3E%20setState(AppState.IDLE)%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20onClear%3D%7BhandleClearHistory%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20onSelect%3D%7BhandleHistorySelect%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20t%3D%7Bt%7D%20%0A%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%20%20%7B%2F*%20LOADING%20STATES%20*%2F%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.ANALYZING_IMAGE%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%3CScanningView%20imageSrc%3D%7BselectedImage%7D%20t%3D%7Bt%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.FETCHING_DETAILS%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%3CSkeletonCard%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20t%3D%7Bt%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20landmarkName%3D%7BidentificationResult%3F.name%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%20%20%7B%2F*%20RESULTS%20%26%20ERRORS%20*%2F%7D%0A%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.SHOWING_RESULT%20%26%26%20result%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%3CTourCard%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%3D%7Bresult%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20onReset%3D%7BresetApp%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20t%3D%7Bt%7D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20isAudioLoading%3D%7BisGeneratingAudio%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%0A%20%20%20%20%20%20%20%20%7Bstate%20%3D%3D%3D%20AppState.ERROR%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22flex%20flex-col%20items-center%20justify-center%20h-full%20p-8%20text-center%20animate-fade-in%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22bg-red-500%2F20%20p-6%20rounded-full%20mb-6%20text-red-400%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CZap%20size%3D%7B48%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%20className%3D%22text-2xl%20font-bold%20mb-2%22%3E%7Bt.oops%7D%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20className%3D%22text-slate-300%20mb-8%20max-w-xs%20mx-auto%22%3E%7BerrorMsg%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20onClick%3D%7BresetApp%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22px-6%20py-3%20bg-white%20text-slate-900%20font-bold%20rounded-xl%20hover%3Abg-slate-200%20transition-colors%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bt.tryAgain%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20)%3B%0A%7D%3B%0A%0Aexport%20default%20App%3B`
};

function downloadProject() {
    const zip = new JSZip();

    // Loop through the files object and add them to the zip
    for (const [filename, encodedContent] of Object.entries(files)) {
        zip.file(filename, decodeURIComponent(encodedContent));
    }

    // Generate the zip and trigger download
    zip.generateAsync({type:"blob"}).then(function(content) {
        saveAs(content, "snaptour-project.zip");
        document.getElementById('status').innerText = "Download started!";
        document.getElementById('status').className = "status success";
    });
}
</script>
</body>
</html>